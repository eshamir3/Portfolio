<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Meta – Codebase Analysis</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Link to your existing global CSS (nav, typography, etc.) -->
  <link rel="stylesheet" href="../style.css" />

  <!-- ========== META PAGE INLINE CSS (only Meta‐specific styles) ========== -->
  <style>
    /* ========= BASIC TYPOGRAPHY ========= */
    /* We assume your global style.css already sets fonts, background, etc. */
    body {
      margin: 1rem auto;    /* Small top/bottom margin */
      padding: 0 1rem;      /* Horizontal padding for readability */
      max-width: 100ch;     /* Keep content centered and narrow */
    }
    h1 {
      font-size: 3rem;
      margin-bottom: 0.5rem;
    }
    h2 {
      font-size: 2rem;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }

    /* ========= SUMMARY STATS GRID ========= */
    #stats dl {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 1rem 2rem;
      margin-bottom: 2rem;
    }
    #stats dt {
      font-weight: bold;
      font-size: 0.9rem;
      color: #555;
    }
    #stats dd {
      font-size: 1.25rem;
      margin: 0;
      color: #111;
    }

    /* ========= SCROLLYTELLING LAYOUT ========= */
    #scrolly-1 {
      display: flex;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    /* Left column: commit story text */
    #scatter-story {
      flex: 1;
      padding-right: 1rem;
    }
    /* Right column: sticky scatter plot */
    #scatter-plot {
      flex: 1;
      position: sticky;
      top: 1rem;
      height: 50vh;
    }
    #scatter-plot h3 {
      text-align: center;
      margin-bottom: 0.5rem;
      font-size: 1.2rem;
      color: #333;
    }
    /* Less aggressive spacing than “60vh” */
    .step {
      margin-bottom: 2rem;
      padding-bottom: 0.5rem;
      font-size: 1rem;
      color: #333;
    }
    .step a {
      color: #0066cc;
      text-decoration: none;
    }
    .step a:hover {
      text-decoration: underline;
    }

    /* ========= SLIDER ========= */
    .slider-container {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .slider-container label {
      font-size: 1rem;
      color: #333;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    #commit-time {
      font-weight: bold;
      font-size: 0.9rem;
      color: #111;
    }
    input[type="range"] {
      flex: 1;
      height: 1.5rem;
      -webkit-appearance: none;
      background: #ddd;
      border-radius: 5px;
      outline: none;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 1.5rem;
      height: 1.5rem;
      background: #e91e63;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid #c2185b;
      margin-top: -0.25rem;
    }

    /* ========= TOOLTIP ========= */
    .tooltip {
      position: fixed;
      top: 1rem;
      left: 1rem;
      background: rgba(255,255,255,0.95);
      border: 1px solid #ccc;
      padding: 0.75rem;
      border-radius: 0.4rem;
      font-size: 0.9rem;
      color: #222;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.2s ease, visibility 0.2s ease;
      z-index: 1000;
    }
    .tooltip.visible {
      visibility: visible;
      opacity: 1;
    }
    .tooltip dt {
      font-weight: bold;
      margin-bottom: 0.25rem;
      color: #444;
    }
    .tooltip dd {
      margin-left: 0;
      margin-bottom: 0.5rem;
    }
    .tooltip a {
      color: #e91e63;
      text-decoration: none;
      word-break: break-all;
    }

    /* ========= SCATTER PLOT SVG ========= */
    #chart svg {
      width: 100%;
      height: 100%;
    }
    .gridlines line {
      stroke: #eee;
      stroke-opacity: 0.7;
    }
    circle {
      fill: #2196f3;
      fill-opacity: 0.7;
      transition: transform 0.2s ease, fill-opacity 0.2s ease;
    }
    circle:hover {
      transform: scale(1.5);
      fill-opacity: 1;
      cursor: pointer;
    }

    /* ========= PIE CHART ========= */
    #pie {
      display: block;
      margin: 1.5rem auto;
      max-width: 300px;
      max-height: 300px;
    }
    .pie-legend {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }
    .pie-legend .legend-item {
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    .pie-legend .swatch {
      width: 1rem;
      aspect-ratio: 1;
      border-radius: 50%;
      flex-shrink: 0;
    }

    /* ========= UNIT VISUALIZATION (“FILES BY SIZE”) ========= */
    #files {
      margin-top: 2rem;
    }
    /* Each file is a <dl><dt>…</dt><dd>…</dd></dl> group: */
    #files dl {
      display: grid;
      grid-template-columns: 1fr 4fr;
      gap: 0.5rem 1rem;
      align-items: start;
      margin-bottom: 1rem;
    }
    #files dt {
      font-weight: bold;
      color: #555;
    }
    #files dt code {
      font-family: monospace;
      font-size: 0.9rem;
      word-break: break-all;
    }
    #files dd {
      display: flex;
      flex-wrap: wrap;
      gap: 0.15rem;
      align-items: start;
      padding-top: 0.5rem;
      margin-left: 0;
    }
    .loc {
      width: 0.5rem;
      aspect-ratio: 1;
      background: steelblue;
      border-radius: 50%;
      transition: opacity 0.2s ease;
    }
    .loc:hover {
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <main>
    <!-- ========== PAGE TITLE + DESCRIPTION ========== -->
    <h1>Meta</h1>
    <p>This page includes stats about the code of this website.</p>

    <!-- ========== SUMMARY STATS GRID ========== -->
    <section id="stats">
      <dl>
        <div class="stat-item">
          <dt>COMMITS</dt>
          <dd id="stat-commits">—</dd>
        </div>
        <div class="stat-item">
          <dt>FILES</dt>
          <dd id="stat-files">—</dd>
        </div>
        <div class="stat-item">
          <dt>TOTAL LOC</dt>
          <dd id="stat-loc">—</dd>
        </div>
        <div class="stat-item">
          <dt>MAX DEPTH</dt>
          <dd id="stat-depth">—</dd>
        </div>
        <div class="stat-item">
          <dt>LONGEST LINE</dt>
          <dd id="stat-longest">—</dd>
        </div>
        <div class="stat-item">
          <dt>MAX LINES</dt>
          <dd id="stat-maxlines">—</dd>
        </div>
      </dl>
    </section>

    <!-- ========== EVOLUTION HEADING ========== -->
    <h2>Evolution over time</h2>

    <!-- ========== SCROLLYTELLING BLOCK ========== -->
    <div id="scrolly-1">
      <!-- LEFT: commit story text -->
      <div id="scatter-story"></div>

      <!-- RIGHT: sticky scatter plot -->
      <div id="scatter-plot">
        <h3>Commits by time of day</h3>
        <div id="chart"></div>
      </div>
    </div>

    <!-- ========== SLIDER & TIME LABEL ========== -->
    <div class="slider-container">
      <label for="commit-progress">
        Show commits until:
        <input type="range" id="commit-progress" min="0" max="100" value="100" />
        <time id="commit-time"></time>
      </label>
    </div>

    <!-- ========== SELECTION COUNT & LANGUAGE BREAKDOWN (placeholder) ========== -->
    <p id="selection-count">No commits selected</p>
    <dl id="language-breakdown" class="stats"></dl>

    <!-- ========== PIE CHART (static) ========= -->
    <svg id="pie"></svg>
    <div class="pie-legend"></div>

    <!-- ========== TOOLTIP (initially hidden) ========== -->
    <dl id="commit-tooltip" class="tooltip">
      <dt>Commit</dt>
      <dd><a href="#" id="commit-link" target="_blank"></a></dd>
      <dt>Date</dt>
      <dd id="commit-date"></dd>
      <dt>Time</dt>
      <dd id="commit-time-tooltip"></dd>
      <dt>Author</dt>
      <dd id="commit-author"></dd>
      <dt>Lines edited</dt>
      <dd id="commit-lines"></dd>
    </dl>

    <!-- ========== UNIT VISUALIZATION: Files by size ========= -->
    <h2>Files by size</h2>
    <div id="files"></div>
  </main>

  <!-- ========== MAIN JS ========== -->
  <script type="module" src="./main.js"></script>
</body>
</html>
